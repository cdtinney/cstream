package com.cstream.logging;

import java.util.logging.Handler;
import java.util.logging.LogRecord;
import java.util.logging.Logger;

public class LogHandler extends Handler {
	
	public static boolean DEBUG = false;
	
	public static void setHandler(Logger logger) {
	
		Logger parent = logger.getParent();
		
		for (Handler handler: parent.getHandlers()) {
			parent.removeHandler(handler);
		}
		
		LogHandler customHandler = new LogHandler();
		customHandler.setFormatter(new LogFormatter());
		customHandler.setLevel(LogLevel.INFO);	
		
		parent.setLevel(DEBUG == true ? LogLevel.DEBUG : LogLevel.FINE);
		parent.addHandler(customHandler);
		
	}

	@Override
	public void publish(LogRecord r) {
		
		// Ignore FINE log messages - these are generated by JavaFX
		if (r.getLevel() == LogLevel.FINE) {
			return;
		}
		
		System.out.println(getFormatter().format(r));
		
	}

	@Override
	public void close() throws SecurityException {
		// Do nothing
	}

	@Override
	public void flush() {
		// Do nothing
	}
	
}
